# MUD

# Client Console

Обычный клиент, только без ftxui 

# Client

Клиенту достаточно написать ip адрес и порт чтобы подключиться, после введения ника он подключится к серверу и сможет играть. После закрытия клиента игрок не удалиться, и человек сможет снова зайти за того же игрока.

# Server

Вся игра работает на конфигурациях, хранящяя всю информацию о комнатах, предметах, врагах, крафтах в JSON конфигах.
Все конфиги должны находиться в папке Config, находящаяся в корневой папке исполняемого файла сервера.

## Структуры JSON:

Конфигурация сервера напрямую настраивается через JSON конфиги, все они разделены на несколько файлов для удобства работы:

### Items.json

Основные поля предметов:

id - уникальный номер для предмета.
name - имя предмета, которое в дальнейшем будет использоваться для интерактивный команд и вывода информации.
description - описание предмета.
useDescription - описание, которое будет выводиться при использовании предмета.
type - тип предмета *1.
canSpawn - может ли этот предмет заспавниться на карте.
spawnChance - шанс спавна предмета от 0 до 1.

Это были обязательные поля для базового класса обьекта.
Так же от типа обьекта зависят его дополнительные поля, которые необходимы для работы игры

### Тип 0 - Компонент:

Предмет не имеет никаких дополнительных полей, и служит как элементом для крафта других предметов.

### Тип 1 - Оружие:

damage - поле хранящее уровень дамага при использовании этого оружия.

### Тип 2 - Броня:

armor - показывает сколько будет начисляться брони игроку при использовании.

### Тип 3 - Аптечка:

heal - показывает сколько будет начисляться здоровья игроку при использовании.

---

В случае если одного из необходимых полей не будет в конфиге, загрузчик конфигов выдаст ошибку.


```
[
	{
		"id" : 1,
		"name" : "Предмет1",
		"description" : "Описание1",
		"useDescription" : "Использование1",
		"type" : 0,
		"canSpawn" : true,
		"spawnChance" : 0.5
	},
	{
		"id" : 2,
		"name" : "Предмет2",
		"description" : "Описание2",
		"useDescription" : "Использование2",
		"type" : 0,
		"canSpawn" : true,
		"spawnChance" : 0.2
	},
	{
		"id" : 3,
		"name" : "Предмет3",
		"description" : "Описание3",
		"useDescription" : "Использование3",
		"type" : 1,
		"canSpawn" : false,
		"spawnChance" : 0.2,
		"damage" : 5
	}
]
```

### Enemies.json

id - уникальный номер для врага (id предметов и врагов не пересекаются друг с другом, поэтому можно не бояться что они будут конфликтовать).
replics - хранит массив строк для реплик врага.
exp - опыт, получаемый игроком при убийстве врага.
loot - хранит int массив id предметов, которые могут выпасть с врага при битве.

```
[
	{
		"id" : 1,
		"name" : "Крутой враг",
		"description" : "Описание врага",
		"replics" : ["реплика1","реплика2"],
		"health" : 100,
		"attack" : 15,
		"exp" : 4,
		"spawnChance" : 0.5,
		"loot" : [1,2]
	},
	{
		"id" : 2,
		"name" : "Крутой враг 2",
		"description" : "Описание врага",
		"replics" : ["реплика1","реплика2"],
		"health" : 100,
		"attack" : 15,
		"exp" : 5,
		"spawnChance" : 0.5,
		"loot" : [1,2]
	}
]
```
### Rooms.json

itemDescs - описания положений предметов для этой комнаты (у врагов аналогично enemiesDescs)
type - тип комнаты (1 - обычная комната, 2 - выход из локации)
unItems - список ID предметов, которые могут заспавниться в этой комнате.
repairRecipe - только для типа 2, хранит id предметов необходимые для починки выхода.

```
[
	{
		"id" : 1,
		"name" : "Комната 1",
		"description" : "крутая комната",
		"itemDescs" : ["Описание1","Описание2"],
		"enemiesDescs" : ["Описание1","Описание2"],
		"isExit" : false,
		"spawnChance" : 0.9,
		"type" : 1,
		"unItems" : [1,3]
	},
	{
		"id" : 2,
		"name" : "Комната 2",
		"description" : "хуйня комната",
		"itemDescs" : ["Описание1","Описание2"],
		"enemiesDescs" : ["Описание1","Описание2"],
		"isExit" : false,
		"spawnChance" : 0.5,
		"type" : 2,
		"repairRecipe" : [1,1],
		"unItems" : [2]
	}
]
```
### Crafts.json

id - показывает id предмета который нужно будет скрафтить.
craft - хранит int массив id предметов, необходимые для крафта.

```
[
	{
		"id" : 3,
		"craft" : [1,2]
	}
]

```

### MainConfig.json

FloorCount - количество этажей.
FloorSize - размер сетки для этажа.

```
{
	"FloorCount" : 3,
	"FloorSizeX" : 10,
	"FloorSizeY" : 10
}

```